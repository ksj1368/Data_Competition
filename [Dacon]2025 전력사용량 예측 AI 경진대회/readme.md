# 2025 전력사용량 예측 AI 경진대회

## 대회 개요

### 대회 정보
- **대회명**: 2025 전력사용량 예측 AI 경진대회
- **주최**: 한국에너지공단
- **주관**: DACON
- **대회 기간**: 2025.07.14 ~ 2025.08.25

### 대회 링크
- [대회 홈페이지](https://dacon.io/competitions/official/236531/overview/description)

### 대회 성적
- **최종 순위**: 전체 934팀 중 42등
- **Public Score**: 5.60161
- **Private Score**: 6.05345
- **평가 지표**: SMAPE (Symmetric Mean Absolute Percentage Error)

## 문제 정의

### 주제
건물의 전력사용량 예측 AI 모델 개발

### 설명
건물 정보와 기상 정보를 활용하여 특정 시점의 전력사용량을 예측하는 AI 모델을 개발합니다. 안정적이고 효율적인 에너지 공급을 위해서는 전력 사용량에 대한 정확한 예측이 필요

### 예측 대상
- 100개 건물의 2024년 08월 25일부터 2024년 08월 31일까지의 전력사용량(kWh)
- 시간 단위 예측 (7일 × 24시간 × 100개 건물 = 16,800개 예측값)

## 데이터셋 설명

### 데이터 구성
1. **train.csv**: 학습용 전력소비량 데이터
2. **building_info.csv**: 건물 개요 정보
3. **test.csv**: 테스트용 기상 데이터
4. **sample_submission.csv**: 제출 양식

### 데이터 세부 정보
- **건물 데이터**: 10개 유형, 100개 건물의 전력소비량 (1시간 주기, 2024.6.1~8.31)
- **기상 데이터**: 기온, 강수량, 풍속, 습도, 일조, 일사
- **건물 개요**: 연면적, 냉방면적, 태양광·ESS 용량 등
- **건물 유형**: 공공, 학교, 백화점, 병원, 아파트, 호텔 등

## Code

### 1. 데이터 전처리 (preprocess-2025-electricity-consumption.ipynb)

#### 1.1 기본 데이터 처리
- 건물 정보 병합 및 결측치 처리
- 태양광/ESS 관련 결측치를 0으로 처리
- 수치형/범주형 컬럼 구분 처리

#### 1.2 피처 엔지니어링

**건물 정보 피처**
```python
b_info['연면적구간'] = pd.cut(b_info['연면적(m2)'], bins=[0,15000,30000,45000,float('inf')], labels=['소형(<15k)','중형(15k-30k)','대형(30k-45k)','초대형(45k+)'])
```

**시계열 피처**
- 기본 시간 피처: 월, 주차, 요일, 일, 시간
- 휴일 설정: 토/일요일, 공휴일, 건물별 개별 휴무일
- 순환 인코딩: 시간, 요일, 월의 주기성 반영
- 업무시간 여부, 피크 시간대 플래그

**환경 기상 피처**
- 열지수 (Heat Index)
- 냉방도일 (CDD)
- 불쾌지수
- 체감온도
- 폭염/열대야 플래그

**시계열 피처**
- Lag 피처: 1시간, 3시간, 24시간 전 값
- Differencing: 전시간/전일 대비 변화량
- Rolling Statistics: 3시간, 24시간 단위 평균, 중위수, 범위

**건물별 통계 피처**
- 시간별 전력사용량 평균/표준편차
- 요일-시간별 전력사용량 평균

#### 1.3 건물 클러스터링
```python
# 시계열 패턴과 건물 특성을 결합한 계층적 클러스터링
pivot = train.pivot_table(index='일시', columns='건물번호', values='전력소비량(kWh)')
```

### 2. 모델링 (xgb-fold-2025-electricity-consumption.ipynb)

#### 2.1 타겟 변환
- box cox를 사용하여 target 분포를 정규분포 형태로 변환
```python
# Box-Cox 변환
train_df[target_col], lam = stats.boxcox(train_df[target_col] + 1)
```

#### 2.2 커스텀 손실함수
```python
def weighted_mse(alpha=3):
    # 과소예측 페널티 증가
```

#### 2.3 교차검증 전략
- 건물유형 기반 Stratified K-Fold
- 마지막 주차(8/18~8/24) valid data로 활용

#### 2.4 하이퍼파라미터 최적화
- Optuna 사용

#### 2.5 앙상블 전략
- 상위 3개 하이퍼파라미터 세트 평균 예측

## 성능 개선 포인트
- 커스텀 손실함수 적용
- 도메인 피처 활용

## etc
- LGBM, CrossFormer를 사용해봤지만 예측 성능이 좋지 않아 제외
